<!doctype html>
<html>
	<head>
		<meta charset="utf-8"/>
		<title></title>
	</head>
	<body>
		 <h2>AJBridage test</h2>
		<script src="../../../kissy/test/test.js"></script>
		<script>KISSY.Test.Config.times = 1;</script>
		
		
		<script src="../../../ks-core.js"></script>
		<script src="../../../json.js"></script>

        <script src="../../../kissy/flash/flash-ua.js">
        </script>
        <script src="../../../kissy/flash/flash.js">
        </script>
        <script src="../../../kissy/flash/flash-embed.js">
        </script>
		<script src="ajbridge.js"></script>
		
		
		<div id="myFlashContent">
			 <a href="http://www.adobe.com/go/getflashplayer"> 
	         <img src="get_flash_player.gif" alt="Get Adobe Flash player" /> 
	         </a> 
		</div>
		
		
		
		<script>
			var S = KISSY,
				F = KISSY.Flash,
				A = KISSY.AJBridge;
				config = {
					src:"ajbridge.swf",
					attrs: {
		                width: 400,
		                height: 300
		            },
					params:{
							flashvars:{
								key:"value",
								json:{
									url:"http://YOURDOMAIN.com/entry?t=2&c=3",
									obj:{
										num:1,
										booolean:true,
										arr:[1,"2",true,"http://www.adobe.com/"]
									}
								}
							},
							bgcolor:"#C4C4C4"
						}
				},
				id="myFlashContent";
				
				
				
				
				function test_create(test){
					a = new A(id,config,function(data){
						if (data.status !== 1) test.fail();
					});
					a.on("init",function(ev){
						if(ev.id != id)test.fail();
						test.echo('id: ' + ev.id,',type: ' + ev.type,"\n");
					});
					a.on("addCallback",function(ev){
						if(ev.id != id)test.fail();
						test.echo('id: ' + ev.id,',type: ' + ev.type,"\n");
					});
					a.on("addCallbacks",function(ev){
						if(ev.id != id)test.fail();
						test.echo('id: ' + ev.id,',type: ' + ev.type,"\n");
					});
					a.on("swfReady",function(ev){
						if(ev.id != id)test.fail();
						test.echo('id: ' + ev.id,',type: ' + ev.type,"\n");
					});
				}
				
				
				
//				a.on("init",function(ev){
//					alert(ev.type);
//					alert("SWF:"+ev.target.ref);
//				});
//				a.on("addCallback",function(ev){
//					alert(ev.type);
//				});
//				a.on("addCallbacks",function(ev){
//					alert(ev.type);
//				});
//				a.on("swfReady",function(ev){
//					alert(ev.type);
//				});
				
				//event type see: http://code.google.com/p/kissy/wiki/AboutAJBridge_CN#公开的事件类型
				
				
			
			//console.log(a);
			
		</script>
	</body>
</html>
