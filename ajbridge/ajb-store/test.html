<!doctype html>
<html>
	<head>
		<meta charset="utf-8"/>
		<title></title>
	</head>
	<body>
		<h2>SWFStore test</h2>
		
		
		<script src="../ks-core.js">
        </script>
        <script src="../flash-ua/flash-ua.js">
        </script>
        <script src="../kissy-flash.js">
        </script>
        <script src="../flash-embed/flash-embed.js">
        </script>
		<script src="../kissy-ajbridge/kissy-ajbridge.js"></script>
		
		
		<script src="ajb-store.js"></script>
		
		<div id="myFlashContent">
			 <a href="http://www.adobe.com/go/getflashplayer"> 
	         <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" /> 
	         </a> 
		</div>
		<br/>
		<button type="button" onclick="length();">length</button>
		<button type="button" onclick="setItem();">setItem</button>
		<button type="button" onclick="getItem();">getItem</button>
		<button type="button" onclick="key();">key</button>
		<button type="button" onclick="removeItem();">removeItem</button>
		<button type="button" onclick="cls();">clear</button>
		
		<script>
			var S = KISSY,
				F = S.Flash,
				A = S.AJBridge,
				AJB = S.ajb,
				SWFStore = AJB.Store,
				config ={
					src:"swfstore.swf",
					params:{
						bgcolor:"#CCCCCC"
					}
				},
				id="myFlashContent",
				store = new SWFStore(id,config);
			
			
				store.on("init",function(ev){
					alert(ev.type);
				});
				store.on("addCallback",function(ev){
					alert(ev.type);
				});
				store.on("addCallbacks",function(ev){
					alert(ev.type);
				});
				store.on("swfReady",function(ev){
					alert(ev.type);
				});
				store.on("Store:contentReady",function(ev){
					alert(ev.type);
				});
				store.on("Store:new",function(ev){
					alert(ev.type);
				});
				
			function setItem(){
				var key = prompt('Enter your key:');
				var value = prompt('Enter your value:');
                if (key && key.length && value) {
					store.setItem(key, value);
					alert("save now");
                }
				
			}	
			
			function length(){
				alert(store.length());
			}
			
			function getItem(){
				var str = prompt('Enter your key:');
				alert(store.getItem(str));
			}
				
			function key(){
				var str = prompt('Enter your key:');
				alert(store.key(str));
			}	
			
			function removeItem(){
				var str = prompt('Enter your key:');
				  if (key && key.length){
				  	store.removeItem(str);
					alert("removeItem now");
				  }
				
			}
			
			function cls(){
				store.clear();
			}
			
			console.log(store);
				
		</script>
	</body>
</html>
