KISSY.add("flash-embed",function(f){var p=f.UA,v=f.DOM,w=f.Flash,h=1,o=0,d=-1,a=-2,r=-3,i=-4,u=9,m="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",n="application/x-shockwave-flash",l="object";EMBED_NODE_NAME="embed";var q="ks-flash-",t={flashvars:null,wmode:"",allowscriptaccess:"",allownetworking:"",allowfullscreen:"",play:"false",loop:"",menu:"",quality:"",scale:"",salign:"",bgcolor:"",devicefont:"",base:"",swliveconnect:"",seamlesstabbing:""},k={id:"",width:"",height:"",name:"","class":"",align:""},c={version:9};f.mix(w,{getFPV:function(){return p.fpv},getLength:function(){return w.names.length},add:function(x,z,H){var I=this,y,E,B,G,A,F,D,C;z=z||{};for(G in z){F=z[G];z[G]=null;delete z[G];G=G.toLowerCase();z[G]=F}z=f.merge(c,z);B=z.version;D=z.xi;C=b(B);switch(C){case -1:I._fallback(H,d,x);return;break;case 0:I._fallback(H,o,x);if(!D&&!f.isString(D)){return}z.src=D;break}if(!x){I._fallback(H,i,x);return}f.ready(function(J){y=v.get("#"+x);if(!y){I._fallback(H,a,x);return}z.id=x;E=(y.nodeName+"").toLowerCase();if(E===l||E===EMBED_NODE_NAME){I._register(y,z,H)}else{if(!z.src||!J.isString(z.src)){if(!!D){I._fallback(H,r,x)}}I._embed(y,z,H)}})},contain:function(A){var y=this,B,z,x=w.names.length;if(f.isString(A)){return f.indexOf(A,w.names)}else{if(f.isNumber(A)){B=w.names[A];y.contain(B)}else{for(z=0;z<x;z++){B=w.names[z];if(w.swfs[B]==A){return z}}}}return -1},get:function(z){var x=this,y=x.contain(z);if(y==-1){return null}return w.swfs[w.names[y]]},remove:function(y){var x=this;return x._remove(y)},_fallback:function(C,z,B,y,A){var x={};if(!C||!z){return}x.success=z;if(B){x.id=B}if(A){x.ref=A}if(!f.isNumber(y)){x.index=y}C&&C(x)},_addSWF:function(A,z){var x=this,y=x.contain(A);if(y==-1){w.swfs[A]=z;y=w.names.length;w.names[w.names.length]=A}return y},_register:function(B,A,D){var y=this,x={},z,C=A.id;A=f.merge(c,A);z=y._addSWF(C,B);y._fallback(D,h,C,z,B)},_embed:function(z,B,E){var F=this,x=B.src,A,D,y,C=z;attribs=B.attribs||{};y=attribs.id=B.id;attribs.width=B.width||attribs.width;attribs.height=B.height||attribs.height;f.mix(attribs,k,false);params=B.params||{};if(!f.isEmptyObject(B.flashvars)){params.flashvars=B.flashvars}console.log(params);f.mix(params,t,false);A=F._getSWF(x,attribs,params);if(p.ie){z.outerHTML=A.innerHTML;A=v.get("#"+y)}else{z.parentNode.replaceChild(A,z)}D=F._addSWF(y,A);F._fallback(E,h,y,D,A)},_remove:function(B){var x=this,z,A=x.get(B),y=x.contain(B);if(!A){return null}v.remove(A);z=w.swfs[z];w.names.splice(y,1);delete w.swfs[z];return A},_getSWF:function(A,x,D){var J=this,C,H,B,I,E,y,G=true,F,z=document.createElement("object");for(E in k){E=E.toLowerCase();if(x[E]==null||x[E]==""){continue}z.setAttribute(E,x[E])}if(p.ie){z.setAttribute("classid",m);z.appendChild(s("movie",A));y=document.createElement("div");y.appendChild(z)}else{z.setAttribute("type",n);z.setAttribute("data",A);z.setAttribute("name",x.id)}for(B in t){B=B.toLowerCase();if(D[B]==null||D[B]==""){continue}switch(B){case"flashvars":C=D[B];for(H in C){if(C[H]!==null&&C[H]!=""){if(!F){F=""}else{F+="&"}F+=H+"="+(typeof C[H]=="object"?j(C[H]):encodeURIComponent(C[H]))}}break;default:F=D[B]}z.appendChild(s(B,F))}if(p.ie){z=y}return z}});function s(x,y){var z=document.createElement("param");z.setAttribute("name",x);z.setAttribute("value",y);return z}function j(y){var x=[];switch(e(y)){case"string":y=y.replace(new RegExp('(["\\\\])',"g"),"\\$1");return'"'+encodeURIComponent(y)+'"';case"array":f.each(y,function(B){x.push(j(B))});return"["+x.join(",")+"]";case"function":return'"function()"';case"object":var z=[];for(var A in y){if(y.hasOwnProperty(A)){z.push('"'+A+'":'+j(y[A]))}}return"{"+z.join(",")+"}"}return String(y).replace(/\s/g," ").replace(/\'/g,'"')}function e(y){if(y===null||y===undefined){return false}var x=typeof y;return(x=="object"&&y.push)?"array":x}function b(y){var x=p.fpv;if(x==-1){return x}if(!y){y=u}if(f.isString(y)){y=parseFloat(g(y.split(".")))}return x<y?0:1}function g(x){var y=x[0]+".";x[1]=x[1]||0;switch(x[1].toString().length){case 1:y+="00";break;case 2:y+="0";break}y+=x[1];x[2]=x[2]||0;switch(x[2].toString().length){case 1:y+="0000";break;case 2:y+="000";break;case 3:y+="00";break;case 4:y+="0";break}return(y+=x[2])}});
